

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>terminatorlib.terminal &mdash; terminatorlib 0.98 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="terminatorlib 0.98 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html" class="icon icon-home"> terminatorlib
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../terminatorlib.html">terminatorlib package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../terminatorlib.configobj.html">terminatorlib.configobj package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.configobj.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.configobj.html#module-terminatorlib.configobj.configobj">terminatorlib.configobj.configobj module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.configobj.html#module-terminatorlib.configobj.validate">terminatorlib.configobj.validate module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.configobj.html#module-terminatorlib.configobj">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../terminatorlib.plugins.html">terminatorlib.plugins package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.activitywatch">terminatorlib.plugins.activitywatch module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.custom_commands">terminatorlib.plugins.custom_commands module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.logger">terminatorlib.plugins.logger module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.maven">terminatorlib.plugins.maven module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.terminalshot">terminatorlib.plugins.terminalshot module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.testplugin">terminatorlib.plugins.testplugin module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins.url_handlers">terminatorlib.plugins.url_handlers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../terminatorlib.plugins.html#module-terminatorlib.plugins">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.borg">terminatorlib.borg module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.config">terminatorlib.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.container">terminatorlib.container module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.cwd">terminatorlib.cwd module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.debugserver">terminatorlib.debugserver module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.editablelabel">terminatorlib.editablelabel module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.encoding">terminatorlib.encoding module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.factory">terminatorlib.factory module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.freebsd">terminatorlib.freebsd module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.ipc">terminatorlib.ipc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.keybindings">terminatorlib.keybindings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.layoutlauncher">terminatorlib.layoutlauncher module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.notebook">terminatorlib.notebook module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.optionparse">terminatorlib.optionparse module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.paned">terminatorlib.paned module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.plugin">terminatorlib.plugin module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.prefseditor">terminatorlib.prefseditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.searchbar">terminatorlib.searchbar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.signalman">terminatorlib.signalman module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.terminal">terminatorlib.terminal module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.terminal_popup_menu">terminatorlib.terminal_popup_menu module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.terminator">terminatorlib.terminator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.titlebar">terminatorlib.titlebar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.translation">terminatorlib.translation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.util">terminatorlib.util module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.version">terminatorlib.version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib.window">terminatorlib.window module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terminatorlib.html#module-terminatorlib">Module contents</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">terminatorlib</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>terminatorlib.terminal</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for terminatorlib.terminal</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/python</span>
<span class="c"># Terminator by Chris Jones &lt;cmsj@tenshu.net&gt;</span>
<span class="c"># GPL v2 only</span>
<span class="sd">&quot;&quot;&quot;terminal.py - classes necessary to provide Terminal widgets&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">signal</span>
<span class="kn">import</span> <span class="nn">pygtk</span>
<span class="n">pygtk</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s">&#39;2.0&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">gtk</span>
<span class="kn">import</span> <span class="nn">gobject</span>
<span class="kn">import</span> <span class="nn">pango</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">urllib</span>

<span class="kn">from</span> <span class="nn">util</span> <span class="kn">import</span> <span class="n">dbg</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">gerr</span><span class="p">,</span> <span class="n">spawn_new_terminator</span><span class="p">,</span> <span class="n">make_uuid</span><span class="p">,</span>  <span class="n">manual_lookup</span>
<span class="kn">import</span> <span class="nn">util</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">Config</span>
<span class="kn">from</span> <span class="nn">cwd</span> <span class="kn">import</span> <span class="n">get_default_cwd</span>
<span class="kn">from</span> <span class="nn">factory</span> <span class="kn">import</span> <span class="n">Factory</span>
<span class="kn">from</span> <span class="nn">terminator</span> <span class="kn">import</span> <span class="n">Terminator</span>
<span class="kn">from</span> <span class="nn">titlebar</span> <span class="kn">import</span> <span class="n">Titlebar</span>
<span class="kn">from</span> <span class="nn">terminal_popup_menu</span> <span class="kn">import</span> <span class="n">TerminalPopupMenu</span>
<span class="kn">from</span> <span class="nn">searchbar</span> <span class="kn">import</span> <span class="n">Searchbar</span>
<span class="kn">from</span> <span class="nn">translation</span> <span class="kn">import</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">signalman</span> <span class="kn">import</span> <span class="n">Signalman</span>
<span class="kn">import</span> <span class="nn">plugin</span>
<span class="kn">from</span> <span class="nn">terminatorlib.layoutlauncher</span> <span class="kn">import</span> <span class="n">LayoutLauncher</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">vte</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">gerr</span><span class="p">(</span><span class="s">&#39;You need to install python bindings for libvte&#39;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># pylint: disable-msg=R0904</span>
<div class="viewcode-block" id="Terminal"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal">[docs]</a><span class="k">class</span> <span class="nc">Terminal</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">VBox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class implementing the VTE widget and its wrappings&quot;&quot;&quot;</span>

    <span class="n">__gsignals__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;close-term&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;title-change&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">,)),</span>
        <span class="s">&#39;enumerate&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_INT</span><span class="p">,)),</span>
        <span class="s">&#39;group-tab&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;group-tab-toggle&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;ungroup-tab&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;ungroup-all&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;split-horiz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">,)),</span>
        <span class="s">&#39;split-vert&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">,)),</span>
        <span class="s">&#39;rotate-cw&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;rotate-ccw&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;tab-new&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_BOOLEAN</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_OBJECT</span><span class="p">)),</span>
        <span class="s">&#39;tab-top-new&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;focus-in&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;focus-out&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;zoom&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;maximise&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;unzoom&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;resize-term&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">,)),</span>
        <span class="s">&#39;navigate&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">,)),</span>
        <span class="s">&#39;tab-change&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span>
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_INT</span><span class="p">,)),</span>
        <span class="s">&#39;group-all&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;group-all-toggle&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> <span class="p">()),</span>
        <span class="s">&#39;move-tab&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">SIGNAL_RUN_LAST</span><span class="p">,</span> <span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_NONE</span><span class="p">,</span> 
            <span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">,)),</span>
    <span class="p">}</span>

    <span class="n">TARGET_TYPE_VTE</span> <span class="o">=</span> <span class="mi">8</span>

    <span class="n">terminator</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">vte</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">terminalbox</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">scrollbar</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">scrollbar_position</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">titlebar</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">searchbar</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">group</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">cwd</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">origcwd</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">command</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">clipboard</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">pid</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">matches</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">config</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">default_encoding</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">custom_encoding</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">custom_font_size</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">layout_command</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">fgcolor_active</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">fgcolor_inactive</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">bgcolor</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">palette_active</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">palette_inactive</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">composite_support</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">cnxids</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">targets_for_new_group</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="Terminal.__init__"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class initialiser&quot;&quot;&quot;</span>
        <span class="n">gtk</span><span class="o">.</span><span class="n">VBox</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gobject_init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span> <span class="o">=</span> <span class="n">Terminator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">register_terminal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># FIXME: Surely these should happen in Terminator::register_terminal()?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;enumerate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">do_enumerate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;focus-in&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">focus_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;focus-out&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">focus_left</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matches</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span> <span class="o">=</span> <span class="n">Signalman</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cwd</span> <span class="o">=</span> <span class="n">get_default_cwd</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origcwd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">origcwd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clipboard</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">clipboard_get</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SELECTION_CLIPBOARD</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pending_on_vte_size_allocate</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">Terminal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">_expose_data</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&quot;set_opacity&quot;</span><span class="p">)</span> <span class="ow">or</span> \
           <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&quot;is_composited&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">composite_support</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">composite_support</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;composite_support: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite_support</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_encoding</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_url_matches</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;try_posix_regexp&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">terminalbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_terminalbox</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span> <span class="o">=</span> <span class="n">Titlebar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">connect_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_group_button_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;edit-done&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_edit_done</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;title-change&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">set_terminal_title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;create-group&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">really_create_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">searchbar</span> <span class="o">=</span> <span class="n">Searchbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchbar</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;end-search&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_search_done</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminalbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_end</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">searchbar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_signals</span><span class="p">()</span>

        <span class="n">os</span><span class="o">.</span><span class="n">putenv</span><span class="p">(</span><span class="s">&#39;TERM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;term&#39;</span><span class="p">])</span>
        <span class="n">os</span><span class="o">.</span><span class="n">putenv</span><span class="p">(</span><span class="s">&#39;COLORTERM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;colorterm&#39;</span><span class="p">])</span>

        <span class="n">env_proxy</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">&#39;http_proxy&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">env_proxy</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;http_proxy&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;http_proxy&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">putenv</span><span class="p">(</span><span class="s">&#39;http_proxy&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;http_proxy&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reconfigure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.get_vte"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_vte">[docs]</a>    <span class="k">def</span> <span class="nf">get_vte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This simply returns the vte widget we are using&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.force_set_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.force_set_profile">[docs]</a>    <span class="k">def</span> <span class="nf">force_set_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">profile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forcibly set our profile&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.set_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.set_profile">[docs]</a>    <span class="k">def</span> <span class="nf">set_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set our profile&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">profile</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_profile</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reconfigure</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.get_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_profile">[docs]</a>    <span class="k">def</span> <span class="nf">get_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return our profile name&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.switch_to_next_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.switch_to_next_profile">[docs]</a>    <span class="k">def</span> <span class="nf">switch_to_next_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">profilelist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">list_profiles</span><span class="p">()</span>
        <span class="n">list_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">profilelist</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">list_length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">profilelist</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_profile</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">list_length</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">force_set_profile</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">profilelist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">force_set_profile</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">profilelist</span><span class="p">[</span><span class="n">profilelist</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_profile</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Terminal.switch_to_previous_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.switch_to_previous_profile">[docs]</a>    <span class="k">def</span> <span class="nf">switch_to_previous_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">profilelist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">list_profiles</span><span class="p">()</span>
        <span class="n">list_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">profilelist</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">list_length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">profilelist</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_profile</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">force_set_profile</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">profilelist</span><span class="p">[</span><span class="n">list_length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">force_set_profile</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">profilelist</span><span class="p">[</span><span class="n">profilelist</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_profile</span><span class="p">())</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Terminal.get_cwd"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_cwd">[docs]</a>    <span class="k">def</span> <span class="nf">get_cwd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return our cwd&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">pid_cwd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.close"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close ourselves&quot;&quot;&quot;</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;close: called&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;child-exited&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;close-term&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;close: killing </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">kill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIGHUP</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c"># We really don&#39;t want to care if this failed. Deep OS voodoo is</span>
            <span class="c"># not what we should be doing.</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;os.kill failed: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">ex</span><span class="p">)</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="Terminal.create_terminalbox"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.create_terminalbox">[docs]</a>    <span class="k">def</span> <span class="nf">create_terminalbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a GtkHBox containing the terminal and a scrollbar&quot;&quot;&quot;</span>

        <span class="n">terminalbox</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">VScrollbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_adjustment</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">set_no_show_all</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollbar_position&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar_position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;hidden&#39;</span><span class="p">,</span> <span class="s">&#39;disabled&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar_position</span> <span class="o">==</span> <span class="s">&#39;left&#39;</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">terminalbox</span><span class="o">.</span><span class="n">pack_end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">terminalbox</span><span class="o">.</span><span class="n">pack_start</span>

        <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">)</span>
        <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">terminalbox</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

        <span class="k">return</span><span class="p">(</span><span class="n">terminalbox</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.update_url_matches"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.update_url_matches">[docs]</a>    <span class="k">def</span> <span class="nf">update_url_matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">posix</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the regexps used to match URLs&quot;&quot;&quot;</span>
        <span class="n">userchars</span> <span class="o">=</span> <span class="s">&quot;-A-Za-z0-9&quot;</span>
        <span class="n">passchars</span> <span class="o">=</span> <span class="s">&quot;-A-Za-z0-9,?;.:/!%$^*&amp;~</span><span class="se">\&quot;</span><span class="s">#&#39;&quot;</span>
        <span class="n">hostchars</span> <span class="o">=</span> <span class="s">&quot;-A-Za-z0-9&quot;</span>
        <span class="n">pathchars</span> <span class="o">=</span> <span class="s">&quot;-A-Za-z0-9_$.+!*(),;:@&amp;=?/~#%&#39;</span><span class="se">\&quot;</span><span class="s">&quot;</span>
        <span class="n">schemes</span>   <span class="o">=</span> <span class="s">&quot;(news:|telnet:|nntp:|file:/|https?:|ftps?:|webcal:)&quot;</span>
        <span class="n">user</span>      <span class="o">=</span> <span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">userchars</span> <span class="o">+</span> <span class="s">&quot;]+(:[&quot;</span> <span class="o">+</span> <span class="n">passchars</span> <span class="o">+</span> <span class="s">&quot;]+)?&quot;</span>
        <span class="n">urlpath</span>   <span class="o">=</span> <span class="s">&quot;/[&quot;</span> <span class="o">+</span> <span class="n">pathchars</span> <span class="o">+</span> <span class="s">&quot;]*[^]&#39;.}&gt;) </span><span class="se">\t\r\n</span><span class="s">,</span><span class="se">\\\&quot;</span><span class="s">]&quot;</span>

        <span class="k">if</span> <span class="n">posix</span><span class="p">:</span>
            <span class="n">dbg</span> <span class="p">(</span><span class="s">&#39;Terminal::update_url_matches: Trying POSIX URL regexps&#39;</span><span class="p">)</span>
            <span class="n">lboundry</span> <span class="o">=</span> <span class="s">&quot;[[:&lt;:]]&quot;</span>
            <span class="n">rboundry</span> <span class="o">=</span> <span class="s">&quot;[[:&gt;:]]&quot;</span>
        <span class="k">else</span><span class="p">:</span> <span class="c"># GNU</span>
            <span class="n">dbg</span> <span class="p">(</span><span class="s">&#39;Terminal::update_url_matches: Trying GNU URL regexps&#39;</span><span class="p">)</span>
            <span class="n">lboundry</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">&lt;&quot;</span>
            <span class="n">rboundry</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">&gt;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;full_uri&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span><span class="p">(</span><span class="n">lboundry</span> <span class="o">+</span> <span class="n">schemes</span> <span class="o">+</span> 
                <span class="s">&quot;//(&quot;</span> <span class="o">+</span> <span class="n">user</span> <span class="o">+</span> <span class="s">&quot;@)?[&quot;</span> <span class="o">+</span> <span class="n">hostchars</span>  <span class="o">+</span><span class="s">&quot;.]+(:[0-9]+)?(&quot;</span> <span class="o">+</span> 
                <span class="n">urlpath</span> <span class="o">+</span> <span class="s">&quot;)?&quot;</span> <span class="o">+</span> <span class="n">rboundry</span> <span class="o">+</span> <span class="s">&quot;/?&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;full_uri&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">posix</span><span class="p">:</span>
                <span class="n">err</span> <span class="p">(</span><span class="s">&#39;Terminal::update_url_matches: POSIX failed, trying GNU&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_url_matches</span><span class="p">(</span><span class="n">posix</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">err</span> <span class="p">(</span><span class="s">&#39;Terminal::update_url_matches: Failed adding URL matches&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;voip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span><span class="p">(</span><span class="n">lboundry</span> <span class="o">+</span> 
                    <span class="s">&#39;(callto:|h323:|sip:)&#39;</span> <span class="o">+</span> <span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">userchars</span> <span class="o">+</span> <span class="s">&quot;+][&quot;</span> <span class="o">+</span> 
                    <span class="n">userchars</span> <span class="o">+</span> <span class="s">&quot;.]*(:[0-9]+)?@?[&quot;</span> <span class="o">+</span> <span class="n">pathchars</span> <span class="o">+</span> <span class="s">&quot;]+&quot;</span> <span class="o">+</span> 
                    <span class="n">rboundry</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;addr_only&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span> <span class="p">(</span><span class="n">lboundry</span> <span class="o">+</span> 
                    <span class="s">&quot;(www|ftp)[&quot;</span> <span class="o">+</span> <span class="n">hostchars</span> <span class="o">+</span> <span class="s">&quot;]*\.[&quot;</span> <span class="o">+</span> <span class="n">hostchars</span> <span class="o">+</span> 
                    <span class="s">&quot;.]+(:[0-9]+)?(&quot;</span> <span class="o">+</span> <span class="n">urlpath</span> <span class="o">+</span> <span class="s">&quot;)?&quot;</span> <span class="o">+</span> <span class="n">rboundry</span> <span class="o">+</span> <span class="s">&quot;/?&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span> <span class="p">(</span><span class="n">lboundry</span> <span class="o">+</span> 
                    <span class="s">&quot;(mailto:)?[a-zA-Z0-9][a-zA-Z0-9.+-]*@[a-zA-Z0-9]&quot;</span> <span class="o">+</span>
                            <span class="s">&quot;[a-zA-Z0-9-]*\.[a-zA-Z0-9][a-zA-Z0-9-]+&quot;</span> <span class="o">+</span>
                            <span class="s">&quot;[.a-zA-Z0-9-]*&quot;</span> <span class="o">+</span> <span class="n">rboundry</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;nntp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span> <span class="p">(</span><span class="n">lboundry</span> <span class="o">+</span> 
                  <span class="sd">&quot;&quot;&quot;news:[-A-Z\^_a-z{|}~!&quot;#$%&amp;&#39;()*+,./0-9;:=?`]+@&quot;&quot;&quot;</span> <span class="o">+</span>
                            <span class="s">&quot;[-A-Za-z0-9.]+(:[0-9]+)?&quot;</span> <span class="o">+</span> <span class="n">rboundry</span><span class="p">)</span>

            <span class="c"># Now add any matches from plugins</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">registry</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">PluginRegistry</span><span class="p">()</span>
                <span class="n">registry</span><span class="o">.</span><span class="n">load_plugins</span><span class="p">()</span>
                <span class="n">plugins</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_plugins_by_capability</span><span class="p">(</span><span class="s">&#39;url_handler&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">urlplugin</span> <span class="ow">in</span> <span class="n">plugins</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">urlplugin</span><span class="o">.</span><span class="n">handler_name</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">urlplugin</span><span class="o">.</span><span class="n">match</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">:</span>
                        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;refusing to add duplicate match </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
                        <span class="k">continue</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
                    <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;added plugin URL handler for </span><span class="si">%s</span><span class="s"> (</span><span class="si">%s</span><span class="s">) as </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> 
                        <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">urlplugin</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="n">name</span><span class="p">]))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">err</span><span class="p">(</span><span class="s">&#39;Exception occurred adding plugin URL match: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">ex</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.match_add"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.match_add">[docs]</a>    <span class="k">def</span> <span class="nf">match_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">match</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register a URL match&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">:</span>
            <span class="n">err</span><span class="p">(</span><span class="s">&#39;Terminal::match_add: Refusing to create duplicate match </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_add</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.match_remove"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.match_remove">[docs]</a>    <span class="k">def</span> <span class="nf">match_remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a previously registered URL match&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">:</span>
            <span class="n">err</span><span class="p">(</span><span class="s">&#39;Terminal::match_remove: Unable to remove non-existent match </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
        <span class="k">del</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Terminal.connect_signals"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.connect_signals">[docs]</a>    <span class="k">def</span> <span class="nf">connect_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connect all the gtk signals and drag-n-drop mechanics&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;button-press-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_buttonpress</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;key-press-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_keypress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;button-press-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_buttonpress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;scroll-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_mousewheel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;popup-menu&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup_menu</span><span class="p">)</span>

        <span class="n">srcvtetargets</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&quot;vte&quot;</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">TARGET_SAME_APP</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TARGET_TYPE_VTE</span><span class="p">)]</span>
        <span class="n">dsttargets</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&quot;vte&quot;</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">TARGET_SAME_APP</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TARGET_TYPE_VTE</span><span class="p">),</span> 
                      <span class="p">(</span><span class="s">&#39;text/x-moz-url&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> 
                      <span class="p">(</span><span class="s">&#39;_NETSCAPE_URL&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="n">dsttargets</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">target_list_add_text_targets</span><span class="p">(</span><span class="n">dsttargets</span><span class="p">)</span>
        <span class="n">dsttargets</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">target_list_add_uri_targets</span><span class="p">(</span><span class="n">dsttargets</span><span class="p">)</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Finalised drag targets: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">dsttargets</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span> <span class="o">|</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">BUTTON3_MASK</span><span class="p">),</span> 
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">BUTTON1_MASK</span><span class="p">)]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">drag_source_set</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">srcvtetargets</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">ACTION_MOVE</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">drag_dest_set</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">DEST_DEFAULT_MOTION</span> <span class="o">|</span>
                <span class="n">gtk</span><span class="o">.</span><span class="n">DEST_DEFAULT_HIGHLIGHT</span> <span class="o">|</span> <span class="n">gtk</span><span class="o">.</span><span class="n">DEST_DEFAULT_DROP</span><span class="p">,</span>
                <span class="n">dsttargets</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">ACTION_COPY</span> <span class="o">|</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">ACTION_MOVE</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;drag-begin&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_drag_begin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;drag-data-get&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_drag_data_get</span><span class="p">,</span>
            <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;drag-motion&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_drag_motion</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;drag-data-received&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_drag_data_received</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c"># FIXME: Shouldn&#39;t this be in configure()?</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;copy_on_selection&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;selection-changed&#39;</span><span class="p">,</span> 
                    <span class="k">lambda</span> <span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">copy_clipboard</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite_support</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;composited-changed&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reconfigure</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;window-title-changed&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;title-change&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_window_title</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;grab-focus&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_vte_focus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;focus-in-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_vte_focus_in</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;focus-out-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_vte_focus_out</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;size-allocate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">deferred_on_vte_size_allocate</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">add_events</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">ENTER_NOTIFY_MASK</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;enter_notify_event&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_vte_notify_enter</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;realize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reconfigure</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.create_popup_group_menu"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.create_popup_group_menu">[docs]</a>    <span class="k">def</span> <span class="nf">create_popup_group_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pop up a menu for the group widget&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">:</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span>
            <span class="n">time</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">time</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">button</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate_group_menu</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">popup</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position_popup_group_menu</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
                <span class="n">widget</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.populate_group_menu"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.populate_group_menu">[docs]</a>    <span class="k">def</span> <span class="nf">populate_group_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fill out a group menu&quot;&quot;&quot;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
        <span class="n">groupitem</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;N_ew group...&#39;</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_group</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groups</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">groupitem</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">RadioMenuItem</span><span class="p">(</span><span class="n">groupitem</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;_None&#39;</span><span class="p">))</span>
            <span class="n">groupitem</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">groupitem</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_group</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">groupitem</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">RadioMenuItem</span><span class="p">(</span><span class="n">groupitem</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">group</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;toggled&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_group</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="n">groupitem</span> <span class="o">=</span> <span class="n">item</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groups</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Remove group </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ungroup</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">util</span><span class="o">.</span><span class="n">has_ancestor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Notebook</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;G_roup all in tab&#39;</span><span class="p">))</span>
            <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;group_tab&#39;</span><span class="p">))</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groups</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Ungro_up all in tab&#39;</span><span class="p">))</span>
                <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;ungroup_tab&#39;</span><span class="p">))</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groups</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Remove all groups&#39;</span><span class="p">))</span>
            <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;ungroup-all&#39;</span><span class="p">))</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">())</span>

            <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Close group </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">closegroupedterms</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">))</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">())</span>

        <span class="n">groupitem</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">{</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Broadcast _all&#39;</span><span class="p">):</span><span class="s">&#39;all&#39;</span><span class="p">,</span> 
                          <span class="n">_</span><span class="p">(</span><span class="s">&#39;Broadcast _group&#39;</span><span class="p">):</span><span class="s">&#39;group&#39;</span><span class="p">,</span>
                          <span class="n">_</span><span class="p">(</span><span class="s">&#39;Broadcast _off&#39;</span><span class="p">):</span><span class="s">&#39;off&#39;</span><span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">groupitem</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">RadioMenuItem</span><span class="p">(</span><span class="n">groupitem</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::populate_group_menu: </span><span class="si">%s</span><span class="s"> active: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend</span> <span class="o">==</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="p">[</span><span class="n">value</span><span class="p">]))</span>
            <span class="n">groupitem</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend</span> <span class="o">==</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="p">[</span><span class="n">value</span><span class="p">])</span>
            <span class="n">groupitem</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_groupsend</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="p">[</span><span class="n">value</span><span class="p">])</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">groupitem</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">())</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;_Split to this group&#39;</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;split_to_group&#39;</span><span class="p">])</span>
        <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;toggled&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_splittogroup_toggle</span><span class="p">())</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Auto_clean groups&#39;</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;autoclean_groups&#39;</span><span class="p">])</span>
        <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;toggled&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_autocleangroups_toggle</span><span class="p">())</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">())</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;_Insert terminal number&#39;</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;enumerate&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Insert _padded terminal number&#39;</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;enumerate&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.position_popup_group_menu"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.position_popup_group_menu">[docs]</a>    <span class="k">def</span> <span class="nf">position_popup_group_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the position of the group popup menu&quot;&quot;&quot;</span>
        <span class="n">_screen_w</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">screen_width</span><span class="p">()</span>
        <span class="n">screen_h</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">screen_height</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gtk_version</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">14</span><span class="p">):</span>
            <span class="n">widget_win</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_window</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">widget_win</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">window</span>
        <span class="n">widget_x</span><span class="p">,</span> <span class="n">widget_y</span> <span class="o">=</span> <span class="n">widget_win</span><span class="o">.</span><span class="n">get_origin</span><span class="p">()</span>
        <span class="n">_widget_w</span><span class="p">,</span> <span class="n">widget_h</span> <span class="o">=</span> <span class="n">widget_win</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>

        <span class="n">_menu_w</span><span class="p">,</span> <span class="n">menu_h</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">size_request</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">widget_y</span> <span class="o">+</span> <span class="n">widget_h</span> <span class="o">+</span> <span class="n">menu_h</span> <span class="o">&gt;</span> <span class="n">screen_h</span><span class="p">:</span>
            <span class="n">menu_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">widget_y</span> <span class="o">-</span> <span class="n">menu_h</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">menu_y</span> <span class="o">=</span> <span class="n">widget_y</span> <span class="o">+</span> <span class="n">widget_h</span>

        <span class="k">return</span><span class="p">(</span><span class="n">widget_x</span><span class="p">,</span> <span class="n">menu_y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.set_group"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.set_group">[docs]</a>    <span class="k">def</span> <span class="nf">set_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_item</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set a particular group&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="c"># already in this group, no action needed</span>
            <span class="k">return</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::set_group: Setting group to </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">set_group_label</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">group_hoover</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.create_group"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.create_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Trigger the creation of a group via the titlebar (because popup </span>
<span class="sd">        windows are really lame)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">create_group</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.really_create_group"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.really_create_group">[docs]</a>    <span class="k">def</span> <span class="nf">really_create_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">groupname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The titlebar has spoken, let a group be created&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="n">groupname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_group</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">groupname</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.ungroup"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.ungroup">[docs]</a>    <span class="k">def</span> <span class="nf">ungroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a group&quot;&quot;&quot;</span>
        <span class="c"># FIXME: Could we emit and have Terminator do this?</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">terminals</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">term</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">term</span><span class="o">.</span><span class="n">set_group</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">group_hoover</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.set_groupsend"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.set_groupsend">[docs]</a>    <span class="k">def</span> <span class="nf">set_groupsend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the groupsend mode&quot;&quot;&quot;</span>
        <span class="c"># FIXME: Can we think of a smarter way of doing this than poking?</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::set_groupsend: setting groupsend to </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend</span> <span class="o">=</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="Terminal.do_splittogroup_toggle"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.do_splittogroup_toggle">[docs]</a>    <span class="k">def</span> <span class="nf">do_splittogroup_toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Toggle the splittogroup mode&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;split_to_group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;split_to_group&#39;</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Terminal.do_autocleangroups_toggle"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.do_autocleangroups_toggle">[docs]</a>    <span class="k">def</span> <span class="nf">do_autocleangroups_toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Toggle the autocleangroups mode&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;autoclean_groups&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;autoclean_groups&#39;</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Terminal.reconfigure"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.reconfigure">[docs]</a>    <span class="k">def</span> <span class="nf">reconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reconfigure our settings&quot;&quot;&quot;</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::reconfigure&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;realize&#39;</span><span class="p">)</span>

        <span class="c"># Handle child command exiting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;child-exited&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;exit_action&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;restart&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;child-exited&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">spawn_child</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;exit_action&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;close&#39;</span><span class="p">,</span> <span class="s">&#39;left&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;child-exited&#39;</span><span class="p">,</span> 
                                            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;close-term&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_emulation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;emulation&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_encoding</span> <span class="o">!=</span> <span class="bp">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_encoding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;encoding&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_word_chars</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;word_chars&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_mouse_autohide</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;mouse_autohide&#39;</span><span class="p">])</span>

        <span class="n">backspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;backspace_binding&#39;</span><span class="p">]</span>
        <span class="n">delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;delete_binding&#39;</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">backspace</span> <span class="o">==</span> <span class="s">&#39;ascii-del&#39;</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_ASCII_DELETE</span>
            <span class="k">elif</span> <span class="n">backspace</span> <span class="o">==</span> <span class="s">&#39;control-h&#39;</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_ASCII_BACKSPACE</span>
            <span class="k">elif</span> <span class="n">backspace</span> <span class="o">==</span> <span class="s">&#39;escape-sequence&#39;</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_DELETE_SEQUENCE</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_AUTO</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">backspace</span> <span class="o">==</span> <span class="s">&#39;ascii-del&#39;</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">elif</span> <span class="n">backspace</span> <span class="o">==</span> <span class="s">&#39;control-h&#39;</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">backspace</span> <span class="o">==</span> <span class="s">&#39;escape-sequence&#39;</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">backbind</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">delete</span> <span class="o">==</span> <span class="s">&#39;ascii-del&#39;</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_ASCII_DELETE</span>
            <span class="k">elif</span> <span class="n">delete</span> <span class="o">==</span> <span class="s">&#39;control-h&#39;</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_ASCII_BACKSPACE</span>
            <span class="k">elif</span> <span class="n">delete</span> <span class="o">==</span> <span class="s">&#39;escape-sequence&#39;</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_DELETE_SEQUENCE</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ERASE_AUTO</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">delete</span> <span class="o">==</span> <span class="s">&#39;ascii-del&#39;</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">elif</span> <span class="n">delete</span> <span class="o">==</span> <span class="s">&#39;control-h&#39;</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">delete</span> <span class="o">==</span> <span class="s">&#39;escape-sequence&#39;</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delbind</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_backspace_binding</span><span class="p">(</span><span class="n">backbind</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_delete_binding</span><span class="p">(</span><span class="n">delbind</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_font_size</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;use_system_font&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_system_mono_font</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;font&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="n">pango</span><span class="o">.</span><span class="n">FontDescription</span><span class="p">(</span><span class="n">font</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_allow_bold</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;allow_bold&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;use_theme_colors&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="n">gtk</span><span class="o">.</span><span class="n">STATE_NORMAL</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span><span class="o">.</span><span class="n">base</span><span class="p">[</span><span class="n">gtk</span><span class="o">.</span><span class="n">STATE_NORMAL</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_active</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">color_parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;foreground_color&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">color_parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_color&#39;</span><span class="p">])</span>

        <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;inactive_color_offset&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">factor</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
          <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_active</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">dbg</span><span class="p">((</span><span class="s">&quot;fgcolor_inactive set to: RGB(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">)&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">),</span>
                                                      <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="s">&quot;green&quot;</span><span class="p">),</span>
                                                      <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">)))</span>

        <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">]:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="n">bit</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="n">bit</span><span class="p">)</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>

        <span class="n">dbg</span><span class="p">((</span><span class="s">&quot;fgcolor_inactive set to: RGB(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">)&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">),</span>
                                                      <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="s">&quot;green&quot;</span><span class="p">),</span>
                                                      <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">)))</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;palette&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">palette_active</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">palette_inactive</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">color</span><span class="p">:</span>
                <span class="n">newcolor</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">color_parse</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
                <span class="n">newcolor_inactive</span> <span class="o">=</span> <span class="n">newcolor</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">]:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">newcolor_inactive</span><span class="p">,</span> <span class="n">bit</span><span class="p">,</span>
                            <span class="nb">getattr</span><span class="p">(</span><span class="n">newcolor_inactive</span><span class="p">,</span> <span class="n">bit</span><span class="p">)</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">palette_active</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newcolor</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">palette_inactive</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newcolor_inactive</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_colors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_active</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">palette_active</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor_color</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;set_cursor_shape&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_cursor_shape</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;CURSOR_SHAPE_&#39;</span> <span class="o">+</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;cursor_shape&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()))</span>

        <span class="n">background_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_type&#39;</span><span class="p">]</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;background_type=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">background_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">background_type</span> <span class="o">==</span> <span class="s">&#39;image&#39;</span> <span class="ow">and</span> \
           <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_image&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_image&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_image_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_image&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_scroll_background</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scroll_background&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_image</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="c"># FIXME: I think this is only necessary because of</span>
                <span class="c"># https://bugzilla.gnome.org/show_bug.cgi?id=614910</span>
                <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_scroll_background</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">background_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;image&#39;</span><span class="p">,</span> <span class="s">&#39;transparent&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_tint_color</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">color_parse</span><span class="p">(</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_color&#39;</span><span class="p">]))</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_darkness&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">65536</span><span class="p">)</span>
            <span class="n">saturation</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_darkness&#39;</span><span class="p">])</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;setting background saturation: </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">saturation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_saturation</span><span class="p">(</span><span class="n">saturation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;setting background_saturation: 1&#39;</span><span class="p">)</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mi">65535</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_saturation</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite_support</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;setting opacity: </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>

        <span class="c"># This is quite hairy, but the basic explanation is that we should</span>
        <span class="c"># set_background_transparent(True) when we have no compositing and want</span>
        <span class="c"># fake background transparency, otherwise it should be False.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite_support</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;disable_real_transparency&#39;</span><span class="p">]:</span>
            <span class="c"># We have no compositing support, fake background only</span>
            <span class="n">background_transparent</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">is_composited</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
                <span class="c"># We have compositing and it&#39;s enabled. no fake background.</span>
                <span class="n">background_transparent</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># We have compositing, but it&#39;s not enabled. fake background</span>
                <span class="n">background_transparent</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;background_type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;transparent&#39;</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;setting background_transparent=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">background_transparent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_transparent</span><span class="p">(</span><span class="n">background_transparent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;setting background_transparent=False&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_background_transparent</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;VVVVTE_CURSOR_BLINK_ON&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;cursor_blink&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_cursor_blink_mode</span><span class="p">(</span><span class="s">&#39;VTE_CURSOR_BLINK_ON&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_cursor_blink_mode</span><span class="p">(</span><span class="s">&#39;VTE_CURSOR_BLINK_OFF&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_cursor_blinks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;cursor_blink&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;force_no_bell&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_audible_bell</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_visible_bell</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;beep&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_audible_bell</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;audible_bell&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_visible_bell</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;visible_bell&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;beep&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;urgent_bell&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span> <span class="ow">or</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;icon_bell&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;beep&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_beep</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="n">err</span><span class="p">(</span><span class="s">&#39;beep signal unavailable with this version of VTE&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollback_infinite&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">scrollback_lines</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scrollback_lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollback_lines&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_scrollback_lines</span><span class="p">(</span><span class="n">scrollback_lines</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_scroll_on_keystroke</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scroll_on_keystroke&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_scroll_on_output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scroll_on_output&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar_position</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollbar_position&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollbar_position&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollbar_position&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;disabled&#39;</span><span class="p">,</span> <span class="s">&#39;hidden&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollbar_position&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;left&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">reorder_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;scrollbar_position&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;right&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">reorder_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="p">,</span> <span class="s">&#39;set_alternate_screen_scroll&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_alternate_screen_scroll</span><span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;alternate_screen_scroll&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">queue_draw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.set_cursor_color"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.set_cursor_color">[docs]</a>    <span class="k">def</span> <span class="nf">set_cursor_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the cursor color appropriately&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;cursor_color&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;foreground_color&#39;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_color_cursor</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span> 
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="c"># FIXME: I think this is only necessary because of</span>
                <span class="c"># https://bugzilla.gnome.org/show_bug.cgi?id=614910</span>
                <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;cursor_color&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_color_cursor</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">color_parse</span><span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;cursor_color&#39;</span><span class="p">]))</span>
 </div>
<div class="viewcode-block" id="Terminal.get_window_title"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_window_title">[docs]</a>    <span class="k">def</span> <span class="nf">get_window_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the window title&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_window_title</span><span class="p">()</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.on_group_button_press"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_group_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">on_group_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for the group button&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">_2BUTTON_PRESS</span> <span class="ow">or</span> \
               <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">_3BUTTON_PRESS</span><span class="p">:</span>
                <span class="c"># Ignore these, or they make the interaction bad</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="c"># Super key applies interaction to all terms in group</span>
            <span class="n">include_siblings</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">MOD4_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">MOD4_MASK</span>
            <span class="k">if</span> <span class="n">include_siblings</span><span class="p">:</span>
                <span class="n">targets</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">get_sibling_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span><span class="p">:</span>
                <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;on_group_button_press: toggle terminal to focused terminals group&#39;</span><span class="p">)</span>
                <span class="n">focused</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">get_focussed_terminal</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">focused</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span> <span class="n">targets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">focused</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span> <span class="o">!=</span> <span class="n">focused</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="o">==</span><span class="n">focused</span><span class="o">.</span><span class="n">group</span><span class="p">:</span>
                        <span class="n">new_group</span><span class="o">=</span><span class="bp">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">new_group</span><span class="o">=</span><span class="n">focused</span><span class="o">.</span><span class="n">group</span>
                    <span class="p">[</span><span class="n">term</span><span class="o">.</span><span class="n">set_group</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">new_group</span><span class="p">)</span> <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">]</span>
                    <span class="p">[</span><span class="n">term</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">focused</span><span class="p">)</span> <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">]</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SHIFT_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SHIFT_MASK</span><span class="p">:</span>
                <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;on_group_button_press: rename of terminals group&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">targets_for_new_group</span> <span class="o">=</span> <span class="n">targets</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">create_group</span><span class="p">()</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">BUTTON_PRESS</span><span class="p">:</span>
                <span class="c"># Single Click gives popup</span>
                <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;on_group_button_press: group menu popup&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_popup_group_menu</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;on_group_button_press: unknown group button interaction&#39;</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_keypress"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_keypress">[docs]</a>    <span class="k">def</span> <span class="nf">on_keypress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for keyboard events&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::on_keypress: Called on </span><span class="si">%s</span><span class="s"> with no event&#39;</span> <span class="o">%</span> <span class="n">widget</span><span class="p">)</span>
            <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="c"># Workaround for IBus intefering with broadcast when using dead keys</span>
        <span class="c"># Environment also needs IBUS_DISABLE_SNOOPER=1, or double chars appear</span>
        <span class="c"># in the receivers.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">|</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">MODIFIER_MASK</span> <span class="p">)</span> <span class="o">^</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">MODIFIER_MASK</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::on_keypress: Ingore processed event with event.state </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
            <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="c"># FIXME: Does keybindings really want to live in Terminator()?</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">keybindings</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">mapping</span> <span class="o">==</span> <span class="s">&quot;hide_window&quot;</span><span class="p">:</span>
            <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">mapping</span> <span class="ow">and</span> <span class="n">mapping</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;close_window&#39;</span><span class="p">,</span> 
                                       <span class="s">&#39;full_screen&#39;</span><span class="p">,</span> 
                                       <span class="s">&#39;new_tab&#39;</span><span class="p">]:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::on_keypress: lookup found: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">mapping</span><span class="p">)</span>
            <span class="c"># handle the case where user has re-bound copy to ctrl+&lt;key&gt;</span>
            <span class="c"># we only copy if there is a selection otherwise let it fall through</span>
            <span class="c"># to ^&lt;key&gt;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mapping</span> <span class="o">==</span> <span class="s">&quot;copy&quot;</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_has_selection</span> <span class="p">():</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;key_&quot;</span> <span class="o">+</span> <span class="n">mapping</span><span class="p">)()</span>
                    <span class="k">return</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;key_&quot;</span> <span class="o">+</span> <span class="n">mapping</span><span class="p">)()</span>
                <span class="k">return</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># FIXME: This is all clearly wrong. We should be doing this better</span>
        <span class="c">#         maybe we can emit the key event and let Terminator() care?</span>
        <span class="n">groupsend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend</span>
        <span class="n">groupsend_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span>
        <span class="n">window_focussed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s">&#39;has-toplevel-focus&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">groupsend</span> <span class="o">!=</span> <span class="n">groupsend_type</span><span class="p">[</span><span class="s">&#39;off&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">window_focussed</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">is_focus</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">and</span> <span class="n">groupsend</span> <span class="o">==</span> <span class="n">groupsend_type</span><span class="p">[</span><span class="s">&#39;group&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">group_emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">,</span> <span class="s">&#39;key-press-event&#39;</span><span class="p">,</span>
                        <span class="n">event</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">groupsend</span> <span class="o">==</span> <span class="n">groupsend_type</span><span class="p">[</span><span class="s">&#39;all&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">all_emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;key-press-event&#39;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

        <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_buttonpress"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_buttonpress">[docs]</a>    <span class="k">def</span> <span class="nf">on_buttonpress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for mouse events&quot;&quot;&quot;</span>
        <span class="c"># Any button event should grab focus</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">VScrollbar</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">_2BUTTON_PRESS</span><span class="p">:</span>
            <span class="c"># Suppress double-click behavior</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c"># Ctrl+leftclick on a URL should open it</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_for_url</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">url</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">prepare</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># middleclick should paste the clipboard</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">paste_clipboard</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="c"># rightclick should display a context menu if Ctrl is not pressed</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">popup_menu</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
                <span class="k">return</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Terminal.on_mousewheel"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_mousewheel">[docs]</a>    <span class="k">def</span> <span class="nf">on_mousewheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for modifier + mouse wheel scroll events&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span><span class="p">:</span>
            <span class="c"># Ctrl + mouse wheel up/down with Shift and Super additions</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">MOD4_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">MOD4_MASK</span><span class="p">:</span>
                <span class="n">targets</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">terminals</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SHIFT_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SHIFT_MASK</span><span class="p">:</span>
                <span class="n">targets</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">get_target_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SCROLL_UP</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
                    <span class="n">target</span><span class="o">.</span><span class="n">zoom_in</span><span class="p">()</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SCROLL_DOWN</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
                    <span class="n">target</span><span class="o">.</span><span class="n">zoom_out</span><span class="p">()</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SHIFT_MASK</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SHIFT_MASK</span><span class="p">:</span>
            <span class="c"># Shift + mouse wheel up/down</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SCROLL_UP</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_page</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">SCROLL_DOWN</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_page</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.popup_menu"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.popup_menu">[docs]</a>    <span class="k">def</span> <span class="nf">popup_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Display the context menu&quot;&quot;&quot;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">TerminalPopupMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.do_scrollbar_toggle"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.do_scrollbar_toggle">[docs]</a>    <span class="k">def</span> <span class="nf">do_scrollbar_toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show or hide the terminal scrollbar&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_widget_visibility</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.toggle_widget_visibility"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.toggle_widget_visibility">[docs]</a>    <span class="k">def</span> <span class="nf">toggle_widget_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show or hide a widget&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s">&#39;visible&#39;</span><span class="p">):</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.on_encoding_change"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_encoding_change">[docs]</a>    <span class="k">def</span> <span class="nf">on_encoding_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handle the encoding changing&quot;&quot;&quot;</span>
        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_encoding</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">current</span> <span class="o">!=</span> <span class="n">encoding</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;on_encoding_change: setting encoding to: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">encoding</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">custom_encoding</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">encoding</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;encoding&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_encoding</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_drag_begin"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_drag_begin">[docs]</a>    <span class="k">def</span> <span class="nf">on_drag_begin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">drag_context</span><span class="p">,</span> <span class="n">_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handle the start of a drag event&quot;&quot;&quot;</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">drag_source_set_icon_pixbuf</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">widget_pixbuf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.on_drag_data_get"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_drag_data_get">[docs]</a>    <span class="k">def</span> <span class="nf">on_drag_data_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">_drag_context</span><span class="p">,</span> <span class="n">selection_data</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> 
            <span class="n">_time</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;I have no idea what this does, drag and drop is a mystery. sorry.&quot;&quot;&quot;</span>
        <span class="n">selection_data</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;vte&#39;</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">terminals</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="Terminal.on_drag_motion"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_drag_motion">[docs]</a>    <span class="k">def</span> <span class="nf">on_drag_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">drag_context</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_time</span><span class="p">,</span> <span class="n">_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*shrug*&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">drag_context</span><span class="o">.</span><span class="n">targets</span> <span class="o">==</span> <span class="p">[</span><span class="s">&#39;vte&#39;</span><span class="p">]</span> <span class="ow">and</span> \
           <span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">targets_include_text</span><span class="p">(</span><span class="n">drag_context</span><span class="o">.</span><span class="n">targets</span><span class="p">)</span> <span class="ow">or</span> \
           <span class="n">gtk</span><span class="o">.</span><span class="n">targets_include_uri</span><span class="p">(</span><span class="n">drag_context</span><span class="o">.</span><span class="n">targets</span><span class="p">)):</span>
            <span class="c"># copy text from another widget</span>
            <span class="k">return</span>
        <span class="n">srcwidget</span> <span class="o">=</span> <span class="n">drag_context</span><span class="o">.</span><span class="n">get_source_widget</span><span class="p">()</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">srcwidget</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">EventBox</span><span class="p">)</span> <span class="ow">and</span> 
           <span class="n">srcwidget</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="p">)</span> <span class="ow">or</span> <span class="n">widget</span> <span class="o">==</span> <span class="n">srcwidget</span><span class="p">:</span>
            <span class="c"># on self</span>
            <span class="k">return</span>

        <span class="n">alloc</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">allocation</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;use_theme_colors&#39;</span><span class="p">]:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="n">gtk</span><span class="o">.</span><span class="n">STATE_NORMAL</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">color_parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;foreground_color&#39;</span><span class="p">])</span>

        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_location</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">topleft</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">topright</span> <span class="o">=</span> <span class="p">(</span><span class="n">alloc</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">topmiddle</span> <span class="o">=</span> <span class="p">(</span><span class="n">alloc</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">bottomleft</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">bottomright</span> <span class="o">=</span> <span class="p">(</span><span class="n">alloc</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">bottommiddle</span> <span class="o">=</span> <span class="p">(</span><span class="n">alloc</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">middleleft</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">middleright</span> <span class="o">=</span> <span class="p">(</span><span class="n">alloc</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">alloc</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="c">#print &quot;%f %f %d %d&quot; %(coef1, coef2, b1,b2)</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="s">&quot;right&quot;</span><span class="p">:</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span><span class="n">topright</span><span class="p">,</span> <span class="n">topmiddle</span><span class="p">,</span> <span class="n">bottommiddle</span><span class="p">,</span> <span class="n">bottomright</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s">&quot;top&quot;</span><span class="p">:</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span><span class="n">topleft</span><span class="p">,</span> <span class="n">topright</span><span class="p">,</span> <span class="n">middleright</span> <span class="p">,</span> <span class="n">middleleft</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s">&quot;left&quot;</span><span class="p">:</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span><span class="n">topleft</span><span class="p">,</span> <span class="n">topmiddle</span><span class="p">,</span> <span class="n">bottommiddle</span><span class="p">,</span> <span class="n">bottomleft</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s">&quot;bottom&quot;</span><span class="p">:</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span><span class="n">bottomleft</span><span class="p">,</span> <span class="n">bottomright</span><span class="p">,</span> <span class="n">middleright</span> <span class="p">,</span> <span class="n">middleleft</span><span class="p">)</span> 

        <span class="c">#here, we define some widget internal values</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">_expose_data</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;color&#39;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s">&#39;coord&#39;</span> <span class="p">:</span> <span class="n">coord</span> <span class="p">}</span>
        <span class="c">#redraw by forcing an event</span>
        <span class="n">connec</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">connect_after</span><span class="p">(</span><span class="s">&#39;expose-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_expose_event</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">invalidate_rect</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">process_updates</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="c">#finaly reset the values</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">connec</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">_expose_data</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Terminal.on_expose_event"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_expose_event">[docs]</a>    <span class="k">def</span> <span class="nf">on_expose_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">_event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handle an expose event while dragging&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">widget</span><span class="o">.</span><span class="n">_expose_data</span><span class="p">:</span>
            <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">_expose_data</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">_expose_data</span><span class="p">[</span><span class="s">&#39;coord&#39;</span><span class="p">]</span>

        <span class="n">context</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">cairo_create</span><span class="p">()</span>
        <span class="n">context</span><span class="o">.</span><span class="n">set_source_rgba</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">red</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">context</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">coord</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coord</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">coord</span><span class="p">:</span>
                <span class="n">context</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">context</span><span class="o">.</span><span class="n">fill</span><span class="p">()</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_drag_data_received"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_drag_data_received">[docs]</a>    <span class="k">def</span> <span class="nf">on_drag_data_received</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">drag_context</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">selection_data</span><span class="p">,</span>
            <span class="n">_info</span><span class="p">,</span> <span class="n">_time</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Something has been dragged into the terminal. Handle it as either a</span>
<span class="sd">        URL or another terminal.&quot;&quot;&quot;</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;drag data received of type: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">selection_data</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">gtk</span><span class="o">.</span><span class="n">targets_include_text</span><span class="p">(</span><span class="n">drag_context</span><span class="o">.</span><span class="n">targets</span><span class="p">)</span> <span class="ow">or</span> \
           <span class="n">gtk</span><span class="o">.</span><span class="n">targets_include_uri</span><span class="p">(</span><span class="n">drag_context</span><span class="o">.</span><span class="n">targets</span><span class="p">):</span>
            <span class="c"># copy text with no modification yet to destination</span>
            <span class="n">txt</span> <span class="o">=</span> <span class="n">selection_data</span><span class="o">.</span><span class="n">data</span>
            <span class="n">txt_lines</span> <span class="o">=</span> <span class="n">txt</span><span class="o">.</span><span class="n">split</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">txt_lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">txt_lines</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;file://&#39;</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># It is a list of crlf terminated file:// URL. let&#39;s</span>
                    <span class="c"># iterate over all elements except the last one.</span>
                    <span class="nb">str</span><span class="o">=</span><span class="s">&#39;&#39;</span>
                    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">txt_lines</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;drag data fname: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">fname</span><span class="p">)</span>
                        <span class="n">fname</span> <span class="o">=</span> <span class="s">&quot;&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="n">urllib</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">fname</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span>
                                                                    <span class="s">&#39;</span><span class="se">\&#39;\\\&#39;\&#39;</span><span class="s">&#39;</span><span class="p">))</span>
                        <span class="nb">str</span> <span class="o">+=</span> <span class="n">fname</span> <span class="o">+</span> <span class="s">&#39; &#39;</span>
                    <span class="n">txt</span><span class="o">=</span><span class="nb">str</span>
            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">get_target_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">term</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="n">widgetsrc</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">terminals</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection_data</span><span class="o">.</span><span class="n">data</span><span class="p">)]</span>
        <span class="n">srcvte</span> <span class="o">=</span> <span class="n">drag_context</span><span class="o">.</span><span class="n">get_source_widget</span><span class="p">()</span>
        <span class="c">#check if computation requireds</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">srcvte</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">EventBox</span><span class="p">)</span> <span class="ow">and</span> 
                <span class="n">srcvte</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="p">)</span> <span class="ow">or</span> <span class="n">srcvte</span> <span class="o">==</span> <span class="n">widget</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">srchbox</span> <span class="o">=</span> <span class="n">widgetsrc</span>

        <span class="c"># The widget argument is actually a vte.Terminal(). Turn that into a</span>
        <span class="c"># terminatorlib Terminal()</span>
        <span class="n">maker</span> <span class="o">=</span> <span class="n">Factory</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">widget</span><span class="p">:</span>
                <span class="c"># We&#39;ve run out of widgets. Something is wrong.</span>
                <span class="n">err</span><span class="p">(</span><span class="s">&#39;Failed to find Terminal from vte&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">maker</span><span class="o">.</span><span class="n">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s">&#39;Terminal&#39;</span><span class="p">):</span>
                <span class="k">break</span>

        <span class="n">dsthbox</span> <span class="o">=</span> <span class="n">widget</span>

        <span class="n">dstpaned</span> <span class="o">=</span> <span class="n">dsthbox</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
        <span class="n">srcpaned</span> <span class="o">=</span> <span class="n">srchbox</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>

        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_location</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">srcpaned</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">widgetsrc</span><span class="p">)</span>
        <span class="n">dstpaned</span><span class="o">.</span><span class="n">split_axis</span><span class="p">(</span><span class="n">dsthbox</span><span class="p">,</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;top&#39;</span><span class="p">,</span> <span class="s">&#39;bottom&#39;</span><span class="p">],</span> <span class="bp">None</span><span class="p">,</span> <span class="n">widgetsrc</span><span class="p">,</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;bottom&#39;</span><span class="p">,</span> <span class="s">&#39;right&#39;</span><span class="p">])</span>
        <span class="n">srcpaned</span><span class="o">.</span><span class="n">hoover</span><span class="p">()</span>
        <span class="n">widgetsrc</span><span class="o">.</span><span class="n">ensure_visible_and_focussed</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.get_location"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_location">[docs]</a>    <span class="k">def</span> <span class="nf">get_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get our location within the terminal&quot;&quot;&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="c">#get the diagonales function for the receiving widget</span>
        <span class="n">coef1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">allocation</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">allocation</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">coef2</span> <span class="o">=</span> <span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">allocation</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">allocation</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">b1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">b2</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">allocation</span><span class="o">.</span><span class="n">height</span>
        <span class="c">#determine position in rectangle</span>
        <span class="c">#--------</span>
        <span class="c">#|\    /|</span>
        <span class="c">#| \  / |</span>
        <span class="c">#|  \/  |</span>
        <span class="c">#|  /\  |</span>
        <span class="c">#| /  \ |</span>
        <span class="c">#|/    \|</span>
        <span class="c">#--------</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef1</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef2</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span>  <span class="s">&quot;right&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef1</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef2</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="s">&quot;top&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef1</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef2</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="s">&quot;left&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef1</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">coef2</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="s">&quot;bottom&quot;</span>
        <span class="k">return</span> <span class="n">pos</span>
</div>
<div class="viewcode-block" id="Terminal.grab_focus"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.grab_focus">[docs]</a>    <span class="k">def</span> <span class="nf">grab_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Steal focus for this terminal&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span><span class="o">&amp;</span><span class="n">gtk</span><span class="o">.</span><span class="n">HAS_FOCUS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.ensure_visible_and_focussed"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.ensure_visible_and_focussed">[docs]</a>    <span class="k">def</span> <span class="nf">ensure_visible_and_focussed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make sure that we&#39;re visible and focussed&quot;&quot;&quot;</span>
        <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span>
        <span class="n">topchild</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">get_child</span><span class="p">()</span>
        <span class="n">maker</span> <span class="o">=</span> <span class="n">Factory</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">maker</span><span class="o">.</span><span class="n">isinstance</span><span class="p">(</span><span class="n">topchild</span><span class="p">,</span> <span class="s">&#39;Notebook&#39;</span><span class="p">):</span>
            <span class="c"># Find which page number this term is on</span>
            <span class="n">tabnum</span> <span class="o">=</span> <span class="n">topchild</span><span class="o">.</span><span class="n">page_num_descendant</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="c"># If terms page number is not the current one, switch to it</span>
            <span class="n">current_page</span> <span class="o">=</span> <span class="n">topchild</span><span class="o">.</span><span class="n">get_current_page</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">tabnum</span> <span class="o">!=</span> <span class="n">current_page</span><span class="p">:</span>
                <span class="n">topchild</span><span class="o">.</span><span class="n">set_current_page</span><span class="p">(</span><span class="n">tabnum</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.on_vte_focus"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_vte_focus">[docs]</a>    <span class="k">def</span> <span class="nf">on_vte_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update our UI when we get focus&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;title-change&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_window_title</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="Terminal.on_vte_focus_in"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_vte_focus_in">[docs]</a>    <span class="k">def</span> <span class="nf">on_vte_focus_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">_event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inform other parts of the application when focus is received&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_colors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_active</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">palette_active</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor_color</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">doing_layout</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">last_focused_term</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">is_child_notebook</span><span class="p">():</span>
                <span class="n">notebook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">get_children</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">notebook</span><span class="o">.</span><span class="n">set_last_active_term</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
                <span class="n">notebook</span><span class="o">.</span><span class="n">clean_last_active_term</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">last_active_term</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">last_active_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;focus-in&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_vte_focus_out"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_vte_focus_out">[docs]</a>    <span class="k">def</span> <span class="nf">on_vte_focus_out</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">_event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inform other parts of the application when focus is lost&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_colors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fgcolor_inactive</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">palette_inactive</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor_color</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;focus-out&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_window_focus_out"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_window_focus_out">[docs]</a>    <span class="k">def</span> <span class="nf">on_window_focus_out</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update our UI when the window loses focus&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">&#39;window-focus-out&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.scrollbar_jump"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.scrollbar_jump">[docs]</a>    <span class="k">def</span> <span class="nf">scrollbar_jump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move the scrollbar to a particular row&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_search_done"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_search_done">[docs]</a>    <span class="k">def</span> <span class="nf">on_search_done</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;We&#39;ve finished searching, so clean up&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchbar</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_cursor_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.on_edit_done"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_edit_done">[docs]</a>    <span class="k">def</span> <span class="nf">on_edit_done</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A child widget is done editing a label, return focus to VTE&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.deferred_on_vte_size_allocate"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.deferred_on_vte_size_allocate">[docs]</a>    <span class="k">def</span> <span class="nf">deferred_on_vte_size_allocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">allocation</span><span class="p">):</span>
        <span class="c"># widget &amp; allocation are not used in on_vte_size_allocate, so we</span>
        <span class="c"># can use the on_vte_size_allocate instead of duplicating the code</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_on_vte_size_allocate</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pending_on_vte_size_allocate</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">gobject</span><span class="o">.</span><span class="n">idle_add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">do_deferred_on_vte_size_allocate</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">allocation</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.do_deferred_on_vte_size_allocate"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.do_deferred_on_vte_size_allocate">[docs]</a>    <span class="k">def</span> <span class="nf">do_deferred_on_vte_size_allocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">allocation</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pending_on_vte_size_allocate</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_vte_size_allocate</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">allocation</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.on_vte_size_allocate"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_vte_size_allocate">[docs]</a>    <span class="k">def</span> <span class="nf">on_vte_size_allocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">allocation</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">update_terminal_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_column_count</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_row_count</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">window</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;geometry_hinting&#39;</span><span class="p">]:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span>
            <span class="n">window</span><span class="o">.</span><span class="n">deferred_set_rough_geometry_hints</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.on_vte_notify_enter"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_vte_notify_enter">[docs]</a>    <span class="k">def</span> <span class="nf">on_vte_notify_enter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handle the mouse entering this terminal&quot;&quot;&quot;</span>
        <span class="c"># FIXME: This shouldn&#39;t be looking up all these values every time</span>
        <span class="n">sloppy</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;focus&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;system&#39;</span><span class="p">:</span>
            <span class="n">sloppy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_system_focus</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;sloppy&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;focus&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;sloppy&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">]:</span>
            <span class="n">sloppy</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">sloppy</span> <span class="o">==</span> <span class="bp">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">editing</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">term</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>
            <span class="k">return</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.get_zoom_data"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_zoom_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_zoom_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of information for Window&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_font&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_font</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_char_height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_height</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_char_width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_width</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_allocation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_allocation</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_columns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_column_count</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_rows&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_row_count</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s">&#39;old_parent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>

        <span class="k">return</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.zoom_scale"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.zoom_scale">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">allocation</span><span class="p">,</span> <span class="n">old_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scale our font correctly based on how big we are not vs before&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;size-allocate&#39;</span><span class="p">)</span>
        <span class="c"># FIXME: Is a zoom signal actualy used anywhere?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnxids</span><span class="o">.</span><span class="n">remove_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;zoom&#39;</span><span class="p">)</span>

        <span class="n">new_columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_column_count</span><span class="p">()</span>
        <span class="n">new_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_row_count</span><span class="p">()</span>
        <span class="n">new_font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_font</span><span class="p">()</span>

        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::zoom_scale: Resized from </span><span class="si">%d</span><span class="s">x</span><span class="si">%d</span><span class="s"> to </span><span class="si">%d</span><span class="s">x</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span>
             <span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_columns&#39;</span><span class="p">],</span>
             <span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_rows&#39;</span><span class="p">],</span>
             <span class="n">new_columns</span><span class="p">,</span>
             <span class="n">new_rows</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">new_rows</span> <span class="o">==</span> <span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_rows&#39;</span><span class="p">]</span> <span class="ow">or</span> \
           <span class="n">new_columns</span> <span class="o">==</span> <span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_columns&#39;</span><span class="p">]:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::zoom_scale: One axis unchanged, not scaling&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">scale_factor</span> <span class="o">=</span> <span class="nb">min</span> <span class="p">(</span> <span class="p">(</span><span class="n">new_columns</span> <span class="o">/</span> <span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_columns&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.97</span><span class="p">),</span>
                             <span class="p">(</span><span class="n">new_rows</span> <span class="o">/</span> <span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_rows&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">)</span> <span class="p">)</span>

        <span class="n">new_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">old_data</span><span class="p">[</span><span class="s">&#39;old_font&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span> <span class="o">*</span> <span class="n">scale_factor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">err</span><span class="p">(</span><span class="s">&#39;refusing to set a zero sized font&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">new_font</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">new_size</span><span class="p">)</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;setting new font: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">new_font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="n">new_font</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.is_zoomed"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.is_zoomed">[docs]</a>    <span class="k">def</span> <span class="nf">is_zoomed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determine if we are a zoomed terminal&quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s">&#39;term-zoomed&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">return</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.zoom"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.zoom">[docs]</a>    <span class="k">def</span> <span class="nf">zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Zoom ourself to fill the window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;zoom&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.maximise"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.maximise">[docs]</a>    <span class="k">def</span> <span class="nf">maximise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Maximise ourself to fill the window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;maximise&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.unzoom"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.unzoom">[docs]</a>    <span class="k">def</span> <span class="nf">unzoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Restore normal layout&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;unzoom&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.set_cwd"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.set_cwd">[docs]</a>    <span class="k">def</span> <span class="nf">set_cwd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set our cwd&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cwd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cwd</span> <span class="o">=</span> <span class="n">cwd</span>
</div>
<div class="viewcode-block" id="Terminal.spawn_child"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.spawn_child">[docs]</a>    <span class="k">def</span> <span class="nf">spawn_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">respawn</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">debugserver</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">update_records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;update_records&#39;</span><span class="p">]</span>
        <span class="n">login</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;login_shell&#39;</span><span class="p">]</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">shell</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">command</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">doing_layout</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;still laying out, refusing to spawn a child&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">respawn</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>

        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">options_get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">options</span> <span class="ow">and</span> <span class="n">options</span><span class="o">.</span><span class="n">command</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">command</span>
            <span class="n">options</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">elif</span> <span class="n">options</span> <span class="ow">and</span> <span class="n">options</span><span class="o">.</span><span class="n">execute</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">execute</span>
            <span class="n">options</span><span class="o">.</span><span class="n">execute</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;use_custom_command&#39;</span><span class="p">]:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;custom_command&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout_command</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout_command</span>
        <span class="k">elif</span> <span class="n">debugserver</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">debug_address</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;spawning debug session with: </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">details</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">details</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s">&#39;telnet </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">details</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">details</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c"># working directory set in layout config</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_cwd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
        <span class="c"># working directory given as argument</span>
        <span class="k">elif</span> <span class="n">options</span> <span class="ow">and</span> <span class="n">options</span><span class="o">.</span><span class="n">working_directory</span> <span class="ow">and</span> \
           <span class="n">options</span><span class="o">.</span><span class="n">working_directory</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_cwd</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">working_directory</span><span class="p">)</span>
            <span class="n">options</span><span class="o">.</span><span class="n">working_directory</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">shell</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">path_lookup</span><span class="p">(</span><span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">command</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">shell</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">shell_lookup</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;login_shell&#39;</span><span class="p">]:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;-</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">shell</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">shell</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">command</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">shell</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Unable to find a shell&#39;</span><span class="p">))</span>
            <span class="k">return</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">putenv</span><span class="p">(</span><span class="s">&#39;WINDOWID&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_parent_window</span><span class="p">()</span><span class="o">.</span><span class="n">xid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">envv</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">envv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;TERM=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;term&#39;</span><span class="p">])</span>
        <span class="n">envv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;COLORTERM=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;colorterm&#39;</span><span class="p">])</span>
        <span class="n">envv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;TERMINATOR_UUID=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">urn</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">dbus_name</span><span class="p">:</span>
            <span class="n">envv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;TERMINATOR_DBUS_NAME=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">dbus_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">dbus_path</span><span class="p">:</span>
            <span class="n">envv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;TERMINATOR_DBUS_PATH=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">dbus_path</span><span class="p">)</span>

        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Forking shell: &quot;</span><span class="si">%s</span><span class="s">&quot; with args: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">shell</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">fork_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">shell</span><span class="p">,</span> <span class="n">argv</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">envv</span><span class="o">=</span><span class="n">envv</span><span class="p">,</span>
                                         <span class="n">loglastlog</span><span class="o">=</span><span class="n">login</span><span class="p">,</span> 
                                         <span class="n">logwtmp</span><span class="o">=</span><span class="n">update_records</span><span class="p">,</span>
                                         <span class="n">logutmp</span><span class="o">=</span><span class="n">update_records</span><span class="p">,</span> 
                                         <span class="n">directory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cwd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">shell</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Unable to start shell:&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">shell</span><span class="p">)</span>
            <span class="k">return</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.check_for_url"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.check_for_url">[docs]</a>    <span class="k">def</span> <span class="nf">check_for_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the mouse is over a URL&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">match_check</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_width</span><span class="p">()),</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_height</span><span class="p">())))</span>
</div>
<div class="viewcode-block" id="Terminal.prepare_url"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.prepare_url">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">urlmatch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare a URL from a VTE match&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urlmatch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">urlmatch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">match</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">url</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;mailto:&#39;</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;mailto:&#39;</span> <span class="o">+</span> <span class="n">url</span>
        <span class="k">elif</span> <span class="n">match</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;addr_only&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">url</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;ftp&#39;</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;ftp://&#39;</span> <span class="o">+</span> <span class="n">url</span>
        <span class="k">elif</span> <span class="n">match</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="s">&#39;addr_only&#39;</span><span class="p">]:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://&#39;</span> <span class="o">+</span> <span class="n">url</span>
        <span class="k">elif</span> <span class="n">match</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="c"># We have a match, but it&#39;s not a hard coded one, so it&#39;s a plugin</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">registry</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">PluginRegistry</span><span class="p">()</span>
                <span class="n">registry</span><span class="o">.</span><span class="n">load_plugins</span><span class="p">()</span>
                <span class="n">plugins</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_plugins_by_capability</span><span class="p">(</span><span class="s">&#39;url_handler&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">urlplugin</span> <span class="ow">in</span> <span class="n">plugins</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">match</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">[</span><span class="n">urlplugin</span><span class="o">.</span><span class="n">handler_name</span><span class="p">]:</span>
                        <span class="n">newurl</span> <span class="o">=</span> <span class="n">urlplugin</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">newurl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Terminal::prepare_url: URL prepared by </span><span class="se">\</span>
<span class="si">%s</span><span class="s"> plugin&#39;</span> <span class="o">%</span> <span class="n">urlplugin</span><span class="o">.</span><span class="n">handler_name</span><span class="p">)</span>
                            <span class="n">url</span> <span class="o">=</span> <span class="n">newurl</span>
                        <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">err</span><span class="p">(</span><span class="s">&#39;Exception occurred preparing URL: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">ex</span><span class="p">)</span>

        <span class="k">return</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.open_url"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.open_url">[docs]</a>    <span class="k">def</span> <span class="nf">open_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">prepare</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open a given URL, conditionally unpacking it from a VTE match&quot;&quot;&quot;</span>
        <span class="n">oldstyle</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="n">prepare</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;open_url: URL: </span><span class="si">%s</span><span class="s"> (prepared: </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">prepare</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;use_custom_url_handler&#39;</span><span class="p">]:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&quot;Using custom URL handler: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;custom_url_handler&#39;</span><span class="p">])</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;custom_url_handler&#39;</span><span class="p">],</span> <span class="n">url</span><span class="p">])</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;custom url handler did not work, falling back to defaults&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gtk_version</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> \
           <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gtk</span><span class="p">,</span> <span class="s">&#39;show_uri&#39;</span><span class="p">)</span> <span class="ow">or</span> \
           <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="p">,</span> <span class="s">&#39;CURRENT_TIME&#39;</span><span class="p">):</span>
            <span class="n">oldstyle</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">oldstyle</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">gtk</span><span class="o">.</span><span class="n">show_uri</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CURRENT_TIME</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">oldstyle</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">oldstyle</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Old gtk (</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">), calling xdg-open&#39;</span> <span class="o">%</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gtk_version</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s">&quot;xdg-open&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;xdg-open did not work, falling back to webbrowser.open&#39;</span><span class="p">)</span>
                <span class="kn">import</span> <span class="nn">webbrowser</span>
                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.paste_clipboard"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.paste_clipboard">[docs]</a>    <span class="k">def</span> <span class="nf">paste_clipboard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Paste one of the two clipboards&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">get_target_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">primary</span><span class="p">:</span>
                <span class="n">term</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">paste_primary</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">term</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">paste_clipboard</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">grab_focus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.feed"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.feed">[docs]</a>    <span class="k">def</span> <span class="nf">feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Feed the supplied text to VTE&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">feed_child</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.zoom_in"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.zoom_in">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_in</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Increase the font size&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_font</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.zoom_out"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.zoom_out">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_out</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Decrease the font size&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_font</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.zoom_font"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.zoom_font">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom_in</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the font size&quot;&quot;&quot;</span>
        <span class="n">pangodesc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_font</span><span class="p">()</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="n">pangodesc</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">fontsize</span> <span class="o">&gt;</span> <span class="n">pango</span><span class="o">.</span><span class="n">SCALE</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">zoom_in</span><span class="p">:</span>
            <span class="n">fontsize</span> <span class="o">-=</span> <span class="n">pango</span><span class="o">.</span><span class="n">SCALE</span>
        <span class="k">elif</span> <span class="n">zoom_in</span><span class="p">:</span>
            <span class="n">fontsize</span> <span class="o">+=</span> <span class="n">pango</span><span class="o">.</span><span class="n">SCALE</span>

        <span class="n">pangodesc</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="n">pangodesc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_font_size</span> <span class="o">=</span> <span class="n">fontsize</span>
</div>
<div class="viewcode-block" id="Terminal.zoom_orig"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.zoom_orig">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_orig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Restore original font size&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;use_system_font&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_system_mono_font</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;font&#39;</span><span class="p">]</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&quot;Terminal::zoom_orig: restoring font to: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="n">pango</span><span class="o">.</span><span class="n">FontDescription</span><span class="p">(</span><span class="n">font</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_font_size</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Terminal.set_font"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.set_font">[docs]</a>    <span class="k">def</span> <span class="nf">set_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontdesc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the font we want in VTE&quot;&quot;&quot;</span>
        <span class="n">antialias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;antialias&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">antialias</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">antialias</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ANTI_ALIAS_FORCE_ENABLE</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">antialias</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">antialias</span> <span class="o">=</span> <span class="n">vte</span><span class="o">.</span><span class="n">ANTI_ALIAS_FORCE_DISABLE</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">antialias</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">set_font_full</span><span class="p">(</span><span class="n">fontdesc</span><span class="p">,</span> <span class="n">antialias</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.get_cursor_position"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_cursor_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_cursor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the co-ordinates of our cursor&quot;&quot;&quot;</span>
        <span class="c"># FIXME: THIS METHOD IS DEPRECATED AND UNUSED</span>
        <span class="n">col</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_cursor_position</span><span class="p">()</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_width</span><span class="p">()</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_height</span><span class="p">()</span>
        <span class="k">return</span><span class="p">((</span><span class="n">col</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">row</span> <span class="o">*</span> <span class="n">height</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.get_font_size"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_font_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_font_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the width/height of our font&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_char_height</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="Terminal.get_size"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.get_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the column/rows of the terminal&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_column_count</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_row_count</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="Terminal.on_beep"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.on_beep">[docs]</a>    <span class="k">def</span> <span class="nf">on_beep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the urgency hint for our window&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;urgent_bell&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">window</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">TOPLEVEL</span><span class="p">:</span>
                <span class="n">window</span><span class="o">.</span><span class="n">set_urgency_hint</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;icon_bell&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">icon_bell</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.describe_layout"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.describe_layout">[docs]</a>    <span class="k">def</span> <span class="nf">describe_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">global_layout</span><span class="p">,</span> <span class="n">child_order</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Describe our layout&quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">layout</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Terminal&#39;</span>
        <span class="n">layout</span><span class="p">[</span><span class="s">&#39;parent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="n">layout</span><span class="p">[</span><span class="s">&#39;order&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">child_order</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">:</span>
            <span class="n">layout</span><span class="p">[</span><span class="s">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">layout</span> <span class="o">!=</span> <span class="s">&quot;default&quot;</span><span class="p">:</span>
            <span class="c"># There&#39;s no point explicitly noting default profiles</span>
            <span class="n">layout</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">get_custom_string</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">layout</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
        <span class="n">layout</span><span class="p">[</span><span class="s">&#39;uuid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;terminal</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">count</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">global_layout</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">layout</span>
        <span class="k">return</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.create_layout"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.create_layout">[docs]</a>    <span class="k">def</span> <span class="nf">create_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply our layout&quot;&quot;&quot;</span>
        <span class="n">dbg</span><span class="p">(</span><span class="s">&#39;Setting layout&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;command&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;command&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout_command</span> <span class="o">=</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;command&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;profile&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">list_profiles</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;group&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;group&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="c"># This doesn&#39;t need/use self.titlebar, but it&#39;s safer than sending</span>
            <span class="c"># None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">really_create_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="p">,</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;group&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;title&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titlebar</span><span class="o">.</span><span class="n">set_custom_string</span><span class="p">(</span><span class="n">layout</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;directory&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;directory&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;directory&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;uuid&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">layout</span><span class="p">[</span><span class="s">&#39;uuid&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="n">make_uuid</span><span class="p">(</span><span class="n">layout</span><span class="p">[</span><span class="s">&#39;uuid&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Terminal.scroll_by_page"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.scroll_by_page">[docs]</a>    <span class="k">def</span> <span class="nf">scroll_by_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pages</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scroll up or down in pages&quot;&quot;&quot;</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="n">pages</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_adjustment</span><span class="p">()</span><span class="o">.</span><span class="n">get_page_increment</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">amount</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.scroll_by_line"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.scroll_by_line">[docs]</a>    <span class="k">def</span> <span class="nf">scroll_by_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scroll up or down in lines&quot;&quot;&quot;</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="n">lines</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_adjustment</span><span class="p">()</span><span class="o">.</span><span class="n">get_step_increment</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">amount</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.scroll_by"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.scroll_by">[docs]</a>    <span class="k">def</span> <span class="nf">scroll_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scroll up or down by an amount of lines&quot;&quot;&quot;</span>
        <span class="n">adjustment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_adjustment</span><span class="p">()</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="n">adjustment</span><span class="o">.</span><span class="n">upper</span> <span class="o">-</span> <span class="n">adjustment</span><span class="o">.</span><span class="n">page_size</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">adjustment</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span> <span class="o">+</span> <span class="n">amount</span>
        <span class="n">adjustment</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">bottom</span><span class="p">))</span>

    <span class="c"># There now begins a great list of keyboard event handlers</span></div>
<div class="viewcode-block" id="Terminal.key_zoom_in"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_zoom_in">[docs]</a>    <span class="k">def</span> <span class="nf">key_zoom_in</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_in</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_next_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_next_profile">[docs]</a>    <span class="k">def</span> <span class="nf">key_next_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch_to_next_profile</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_previous_profile"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_previous_profile">[docs]</a>    <span class="k">def</span> <span class="nf">key_previous_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch_to_previous_profile</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_zoom_out"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_zoom_out">[docs]</a>    <span class="k">def</span> <span class="nf">key_zoom_out</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_out</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_copy"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_copy">[docs]</a>    <span class="k">def</span> <span class="nf">key_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">copy_clipboard</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_paste"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_paste">[docs]</a>    <span class="k">def</span> <span class="nf">key_paste</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paste_clipboard</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_toggle_scrollbar"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_toggle_scrollbar">[docs]</a>    <span class="k">def</span> <span class="nf">key_toggle_scrollbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_scrollbar_toggle</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_zoom_normal"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_zoom_normal">[docs]</a>    <span class="k">def</span> <span class="nf">key_zoom_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_orig</span> <span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_search"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_search">[docs]</a>    <span class="k">def</span> <span class="nf">key_search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchbar</span><span class="o">.</span><span class="n">start_search</span><span class="p">()</span>

    <span class="c"># bindings that should be moved to Terminator as they all just call</span>
    <span class="c"># a function of Terminator. It would be cleaner if TerminatorTerm</span>
    <span class="c"># has absolutely no reference to Terminator.</span>
    <span class="c"># N (next) - P (previous) - O (horizontal) - E (vertical) - W (close)</span></div>
<div class="viewcode-block" id="Terminal.key_cycle_next"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_cycle_next">[docs]</a>    <span class="k">def</span> <span class="nf">key_cycle_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_go_next</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_cycle_prev"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_cycle_prev">[docs]</a>    <span class="k">def</span> <span class="nf">key_cycle_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_go_prev</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_go_next"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_go_next">[docs]</a>    <span class="k">def</span> <span class="nf">key_go_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;navigate&#39;</span><span class="p">,</span> <span class="s">&#39;next&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_go_prev"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_go_prev">[docs]</a>    <span class="k">def</span> <span class="nf">key_go_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;navigate&#39;</span><span class="p">,</span> <span class="s">&#39;prev&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_go_up"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_go_up">[docs]</a>    <span class="k">def</span> <span class="nf">key_go_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;navigate&#39;</span><span class="p">,</span> <span class="s">&#39;up&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_go_down"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_go_down">[docs]</a>    <span class="k">def</span> <span class="nf">key_go_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;navigate&#39;</span><span class="p">,</span> <span class="s">&#39;down&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_go_left"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_go_left">[docs]</a>    <span class="k">def</span> <span class="nf">key_go_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;navigate&#39;</span><span class="p">,</span> <span class="s">&#39;left&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_go_right"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_go_right">[docs]</a>    <span class="k">def</span> <span class="nf">key_go_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;navigate&#39;</span><span class="p">,</span> <span class="s">&#39;right&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_split_horiz"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_split_horiz">[docs]</a>    <span class="k">def</span> <span class="nf">key_split_horiz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;split-horiz&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">pid_cwd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.key_split_vert"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_split_vert">[docs]</a>    <span class="k">def</span> <span class="nf">key_split_vert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;split-vert&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">pid_cwd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.key_rotate_cw"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_rotate_cw">[docs]</a>    <span class="k">def</span> <span class="nf">key_rotate_cw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;rotate-cw&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_rotate_ccw"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_rotate_ccw">[docs]</a>    <span class="k">def</span> <span class="nf">key_rotate_ccw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;rotate-ccw&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_close_term"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_close_term">[docs]</a>    <span class="k">def</span> <span class="nf">key_close_term</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_resize_up"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_resize_up">[docs]</a>    <span class="k">def</span> <span class="nf">key_resize_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;resize-term&#39;</span><span class="p">,</span> <span class="s">&#39;up&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_resize_down"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_resize_down">[docs]</a>    <span class="k">def</span> <span class="nf">key_resize_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;resize-term&#39;</span><span class="p">,</span> <span class="s">&#39;down&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_resize_left"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_resize_left">[docs]</a>    <span class="k">def</span> <span class="nf">key_resize_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;resize-term&#39;</span><span class="p">,</span> <span class="s">&#39;left&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_resize_right"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_resize_right">[docs]</a>    <span class="k">def</span> <span class="nf">key_resize_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;resize-term&#39;</span><span class="p">,</span> <span class="s">&#39;right&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_move_tab_right"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_move_tab_right">[docs]</a>    <span class="k">def</span> <span class="nf">key_move_tab_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;move-tab&#39;</span><span class="p">,</span> <span class="s">&#39;right&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_move_tab_left"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_move_tab_left">[docs]</a>    <span class="k">def</span> <span class="nf">key_move_tab_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;move-tab&#39;</span><span class="p">,</span> <span class="s">&#39;left&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_toggle_zoom"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_toggle_zoom">[docs]</a>    <span class="k">def</span> <span class="nf">key_toggle_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unzoom</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maximise</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_scaled_zoom"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_scaled_zoom">[docs]</a>    <span class="k">def</span> <span class="nf">key_scaled_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unzoom</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_next_tab"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_next_tab">[docs]</a>    <span class="k">def</span> <span class="nf">key_next_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_prev_tab"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_prev_tab">[docs]</a>    <span class="k">def</span> <span class="nf">key_prev_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_1"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_1">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_2"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_2">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_3"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_3">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_4"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_4">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_5"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_5">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_6"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_6">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_7"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_7">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_8"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_8">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_9"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_9">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_9</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_switch_to_tab_10"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_switch_to_tab_10">[docs]</a>    <span class="k">def</span> <span class="nf">key_switch_to_tab_10</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;tab-change&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_reset"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_reset">[docs]</a>    <span class="k">def</span> <span class="nf">key_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">reset</span> <span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_reset_clear"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_reset_clear">[docs]</a>    <span class="k">def</span> <span class="nf">key_reset_clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">reset</span> <span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_group_all"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_group_all">[docs]</a>    <span class="k">def</span> <span class="nf">key_group_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;group-all&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_group_all_toggle"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_group_all_toggle">[docs]</a>    <span class="k">def</span> <span class="nf">key_group_all_toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;group-all-toggle&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_ungroup_all"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_ungroup_all">[docs]</a>    <span class="k">def</span> <span class="nf">key_ungroup_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;ungroup-all&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_group_tab"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_group_tab">[docs]</a>    <span class="k">def</span> <span class="nf">key_group_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;group-tab&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_group_tab_toggle"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_group_tab_toggle">[docs]</a>    <span class="k">def</span> <span class="nf">key_group_tab_toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;group-tab-toggle&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_ungroup_tab"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_ungroup_tab">[docs]</a>    <span class="k">def</span> <span class="nf">key_ungroup_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;ungroup-tab&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_new_window"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_new_window">[docs]</a>    <span class="k">def</span> <span class="nf">key_new_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">new_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">pid_cwd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Terminal.key_new_terminator"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_new_terminator">[docs]</a>    <span class="k">def</span> <span class="nf">key_new_terminator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">spawn_new_terminator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origcwd</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-u&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Terminal.key_broadcast_off"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_broadcast_off">[docs]</a>    <span class="k">def</span> <span class="nf">key_broadcast_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_groupsend</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="p">[</span><span class="s">&#39;off&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">focus_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_broadcast_group"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_broadcast_group">[docs]</a>    <span class="k">def</span> <span class="nf">key_broadcast_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_groupsend</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="p">[</span><span class="s">&#39;group&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">focus_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_broadcast_all"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_broadcast_all">[docs]</a>    <span class="k">def</span> <span class="nf">key_broadcast_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_groupsend</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">groupsend_type</span><span class="p">[</span><span class="s">&#39;all&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span><span class="o">.</span><span class="n">focus_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_insert_number"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_insert_number">[docs]</a>    <span class="k">def</span> <span class="nf">key_insert_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;enumerate&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Terminal.key_insert_padded"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_insert_padded">[docs]</a>    <span class="k">def</span> <span class="nf">key_insert_padded</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;enumerate&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_edit_window_title"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_edit_window_title">[docs]</a>    <span class="k">def</span> <span class="nf">key_edit_window_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Dialog</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Rename Window&#39;</span><span class="p">),</span> <span class="n">window</span><span class="p">,</span>
                        <span class="n">gtk</span><span class="o">.</span><span class="n">DIALOG_MODAL</span><span class="p">,</span>
                        <span class="p">(</span> <span class="n">gtk</span><span class="o">.</span><span class="n">STOCK_CANCEL</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">RESPONSE_REJECT</span><span class="p">,</span>
                          <span class="n">gtk</span><span class="o">.</span><span class="n">STOCK_OK</span><span class="p">,</span> <span class="n">gtk</span><span class="o">.</span><span class="n">RESPONSE_ACCEPT</span> <span class="p">))</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">set_default_response</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">RESPONSE_ACCEPT</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">set_has_separator</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">set_resizable</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">set_border_width</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        
        <span class="n">label</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;Enter a new title for the Terminator window...&#39;</span><span class="p">))</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Entry</span><span class="p">()</span>
        <span class="n">name</span><span class="o">.</span><span class="n">set_activates_default</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">text</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vte</span><span class="o">.</span><span class="n">get_window_title</span><span class="p">():</span>
            <span class="n">name</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        
        <span class="n">dialog</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

        <span class="n">dialog</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="n">gtk</span><span class="o">.</span><span class="n">RESPONSE_ACCEPT</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">get_text</span><span class="p">():</span>
                <span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">force_title</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">force_title</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">force_title</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="k">return</span>
</div>
<div class="viewcode-block" id="Terminal.key_layout_launcher"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_layout_launcher">[docs]</a>    <span class="k">def</span> <span class="nf">key_layout_launcher</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">LAYOUTLAUNCHER</span><span class="o">=</span><span class="n">LayoutLauncher</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Terminal.key_page_up"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_page_up">[docs]</a>    <span class="k">def</span> <span class="nf">key_page_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_page</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_page_down"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_page_down">[docs]</a>    <span class="k">def</span> <span class="nf">key_page_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_page</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_page_up_half"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_page_up_half">[docs]</a>    <span class="k">def</span> <span class="nf">key_page_up_half</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_page</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_page_down_half"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_page_down_half">[docs]</a>    <span class="k">def</span> <span class="nf">key_page_down_half</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_page</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_line_up"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_line_up">[docs]</a>    <span class="k">def</span> <span class="nf">key_line_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_line</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_line_down"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_line_down">[docs]</a>    <span class="k">def</span> <span class="nf">key_line_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_by_line</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Terminal.key_help"><a class="viewcode-back" href="../../terminatorlib.html#terminatorlib.terminal.Terminal.key_help">[docs]</a>    <span class="k">def</span> <span class="nf">key_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">manual_index_page</span> <span class="o">=</span> <span class="n">manual_lookup</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">manual_index_page</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">open_url</span><span class="p">(</span><span class="s">&#39;file://</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">manual_index_page</span><span class="p">))</span>

<span class="c"># End key events</span>
</div></div>
<span class="n">gobject</span><span class="o">.</span><span class="n">type_register</span><span class="p">(</span><span class="n">Terminal</span><span class="p">)</span>
<span class="c"># vim: set expandtab ts=4 sw=4:</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Stephen Boddy, licensed under the CC-BY-SA..
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.98',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>